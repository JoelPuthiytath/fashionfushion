

<body >
    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
        <div class="aside-top">
            <a href="/admin" class="brand-wrap">
                <h4>FashionFusion</h4>
            </a>
            <div>
                <button class="btn btn-icon btn-aside-minimize"> <i class="text-muted material-icons md-menu_open"></i>
                </button>
            </div>
        </div>
        <nav>
            <ul class="menu-aside">
                <li class="menu-item active">
                    <a class="menu-link" href="/admin"> <i class="icon material-icons md-home"></i>
                        <span class="text">Dashboard</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/page-products"> <i
                            class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Products</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/page-users"> <i class="icon material-icons md-person"></i>
                        <span class="text">Users</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/order-page"> <i class="icon material-icons md-shopping_cart"></i>
                        <span class="text">Orders</span>
                    </a>
                </li>
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="/admin/addCategories"> <i class="icon material-icons md-add_box"></i>
                        <span class="text">Add Items</span>
                    </a>
                    <div class="submenu">
                        <a href="/admin/addCategories">Create Categories</a>
                        <a href="/admin/addCoupon">Create Coupon</a>
                        <a href="/admin/banner-creation">Create Banner</a>
                    </div>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/sales-report"> <i class="icon material-icons md-stars"></i>
                        <span class="text">Sales Report</span> </a>
                </li>
            </ul>
            <hr>
            <ul class="menu-aside">
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="#"> <i class="icon material-icons md-settings"></i>
                        <span class="text">Settings</span>
                    </a>
                </li>
            </ul>
            <br>
            <br>
        </nav>
    </aside>

    {{!-- <div class="screen-overlay"></div> --}}
    <main class="main-wrap">
        <header class=" main-header navbar">
            <div class="col-search">
                <form class="searchform">
                    <div class="input-group">
                        <input list="search_terms" type="text" class="form-control" placeholder="Search term">
                        <button class="btn btn-light bg" type="button"> <i
                                class="material-icons md-search"></i></button>
                    </div>
                    <datalist id="search_terms">
                        <option value="Shirts">
                        <option value="Pants">
                        <option value="Bags">
                    </datalist>
                </form>
            </div>
            <div class="col-nav">
                <button class="btn btn-icon btn-mobile me-auto" data-trigger="#offcanvas_aside"> <i
                        class="material-icons md-apps"></i> </button>
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link btn-icon" href="#">
                            <i class="material-icons md-notifications animation-shake"></i>
                            <span class="badge rounded-pill">3</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn-icon darkmode" href="#"> <i class="material-icons md-nights_stay"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="requestfullscreen nav-link btn-icon"><i
                                class="material-icons md-cast"></i></a>
                    </li>
                    <li class="dropdown nav-item">
                        <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownAccount"
                            aria-expanded="false"> <img class="img-xs rounded-circle"
                                src="/admin-assets/imgs/people/avatar2.jpg" alt="User"></a>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownAccount">
                            <a class="dropdown-item" href="#"><i class="material-icons md-perm_identity"></i>Edit
                                Profile</a>
                            <a class="dropdown-item" href="#"><i class="material-icons md-settings"></i>Account
                                Settings</a>
                            <a class="dropdown-item" href="#"><i class="material-icons md-help_outline"></i>Help
                                center</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="/admin/admin-logout"><i
                                    class="material-icons md-exit_to_app"></i>Logout</a>
                        </div>
                    </li>
                </ul>
            </div>
        </header>
        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Dashboard </h2>
                    <p>Whole data about your business here</p>
                </div>
                {{!-- <div>
                    <a href="#" class="btn btn-primary"><i
                            class="text-muted material-icons md-post_add"></i>{{totalRevenue}}</a>
                </div> --}}
            </div>
            <div class="row">
                <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-primary-light"><i
                                    class="text-primary material-icons md-monetization_on"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Revenue</h6>
                                <span>₹{{totalRevenue}}</span>
                                <span class="text-sm">
                                    Shipping fees are not included
                                </span>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-success-light"><i
                                    class="text-success material-icons md-local_shipping"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Orders</h6> <span>{{totalOrders}}</span>
                                <span class="text-sm">
                                    Excluding orders in transit
                                </span>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-warning-light"><i
                                    class="text-warning material-icons md-qr_code"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Products</h6> <span>{{totalProducts}}</span>
                                <span class="text-sm">
                                    In {{totalCategories}} Categories
                                </span>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-info-light"><i
                                    class="text-info material-icons md-shopping_basket"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Total Users</h6> <span>{{usersCount}}</span>
                                <span class="text-sm">
                                    Based in your local time.
                                </span>
                            </div>
                        </article>
                    </div>
                    <span id="category-data" style="display:none">{{categoryWise}}</span>
                </div>
            </div>
            <div class="row">
                <div class=" col-xl-8 col-lg-12">
                    <div class="card mb-4">
                        <article class="card-body">
                            <h5 class="card-title">Sale statistics</h5>
                            <canvas id="myChart" height="120px"></canvas>
                        </article>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-12">
                    <div class="card mb-4">
                        <article class="card-body">
                            <h5 class="card-title">Revenue Base on Area</h5>
                            <canvas id="myChart2" height="217"></canvas>
                        </article>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-xl-8">
                </div>
                <div class=" col-xl-4 col-lg-12">
                    <div class="card mb-4">
                        <article class="card-body">
                            <h5 class="card-title">Products based category</h5>
                            <canvas id="myChart3" height="217"></canvas>
                        </article>
                    </div>

                </div>

            </div>

            {{!-- <div class="pagination-area mt-30 mb-50">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-start">
                        <li class="page-item active"><a class="page-link" href="#">01</a></li>
                        <li class="page-item"><a class="page-link" href="#">02</a></li>
                        <li class="page-item"><a class="page-link" href="#">03</a></li>
                        <li class="page-item"><a class="page-link dot" href="#">...</a></li>
                        <li class="page-item"><a class="page-link" href="#">16</a></li>
                        <li class="page-item"><a class="page-link" href="#"><i
                                    class="material-icons md-chevron_right"></i></a></li>
                    </ul>
                </nav>
            </div> --}}
        </section> <!-- content-main end// -->
        <footer class="main-footer font-xs">
            <div class="row pb-30 pt-15">
                <div class="col-sm-6">
                    <script>
                        document.write(new Date().getFullYear())
                    </script> ©, FasionFusion.
                </div>
            </div>
        </footer>
    </main>




<script src="/admin-assets/js/vendors/jquery-3.6.0.min.js"></script>
<script src="/admin-assets/js/vendors/bootstrap.bundle.min.js"></script>
<script src="/admin-assets/js/vendors/select2.min.js"></script>
<script src="/admin-assets/js/vendors/perfect-scrollbar.js"></script>
<script src="/admin-assets/js/vendors/jquery.fullscreen.min.js"></script>ś
<script src="/admin-assets/js/vendors/chart.js"></script>
<!-- Main Script -->
<script src="/admin-assets/js/main.js" type="text/javascript"></script>
{{!--
<script src="admin-assets/js/custom-chart.js" type="text/javascript"></script> --}}
<script>

  document.addEventListener("DOMContentLoaded", function() {
   !(function (e) {
  "use strict";
  if (
    (e(".menu-item.has-submenu .menu-link").on("click", function (s) {
      s.preventDefault(),
        e(this).next(".submenu").is(":hidden") &&
          e(this)
            .parent(".has-submenu")
            .siblings()
            .find(".submenu")
            .slideUp(200),
        e(this).next(".submenu").slideToggle(200);
    }),
    e("[data-trigger]").on("click", function (s) {
      s.preventDefault(), s.stopPropagation();
      var n = e(this).attr("data-trigger");
      e(n).toggleClass("show"),
        e("body").toggleClass("offcanvas-active"),
        e(".screen-overlay").toggleClass("show");
    }),
    e(".screen-overlay, .btn-close").click(function (s) {
      e(".screen-overlay").removeClass("show"),
        e(".mobile-offcanvas, .show").removeClass("show"),
        e("body").removeClass("offcanvas-active");
    }),
    e(".btn-aside-minimize").on("click", function () {
      window.innerWidth < 768
        ? (e("body").removeClass("aside-mini"),
          e(".screen-overlay").removeClass("show"),
          e(".navbar-aside").removeClass("show"),
          e("body").removeClass("offcanvas-active"))
        : e("body").toggleClass("aside-mini");
    }),
    e(".select-nice").length && e(".select-nice").select2(),
    e("#offcanvas_aside").length)
  ) {
    const e = document.querySelector("#offcanvas_aside");
    new PerfectScrollbar(e);
  }
  e(".darkmode").on("click", function () {
    e("body").toggleClass("dark");
  });
})(jQuery);

  });

</script>

<script>
        (function ($) {
            "use strict";

            /Sale statistics Chart/;
            if ($("#myChart").length) {
                var monthlyRevenue = JSON.parse(`[{{monthlyRevenue}}]`);
                var monthlyOrders = JSON.parse(`[{{monthlyOrders}}]`);
                var cancelledOrder = JSON.parse("[{{cancelledOrders}}]");

                /* var monthlyRevenueData = JSON.parse('{{monthlyRevenue}}'); // Parse the monthlyRevenue data from the backend
                   console.log(monthlyRevenueData)
            
                   var monthlyOrderData = JSON.parse('{{ monthlyOrder }}'); // Parse the monthlyOrder data from the backend
                    console.log(monthlyOrderData)
            
                    var cancelledOrderData = JSON.parse('{{ cancelledOrder }}'); // Parse the monthlyOrder data from the backend
                    console.log(cancelledOrderData)*/

                var ctx = document.getElementById("myChart").getContext("2d");
                var currentMonthIndex = new Date().getMonth();
                var chart = new Chart(ctx, {
                    // The type of chart we want to create
                    type: "line",

                    // The data for our dataset
                    data: {
                        labels: [
                            "Jan",
                            "Feb",
                            "Mar",
                            "Apr",
                            "May",
                            "Jun",
                            "Jul",
                            "Aug",
                            "Sep",
                            "Oct",
                            "Nov",
                            "Dec",
                        ],
                        datasets: [
                            {
                                label: "Monthly Revenue",
                                tension: 0.5,
                                fill: true,
                                backgroundColor: "rgba(44, 120, 220, 0.2)",
                                borderColor: "rgba(44, 120, 220)",
                                data: monthlyRevenue,
                                pointRadius: 0,
                                // data: total
                            },
                            {
                                label: "orders",
                                tension: 0.3,
                                fill: true,
                                backgroundColor: "rgba(4, 209, 130, 0.2)",
                                borderColor: "rgb(4, 209, 130)",
                                //data: monthlyOrderData
                                data: monthlyOrders,
                            },
                            {
                                label: "cancelled",
                                tension: 0.3,
                                fill: true,
                                backgroundColor: "rgba(380, 200, 230, 0.2)",
                                borderColor: "rgb(380, 200, 230)",
                                //data: cancelledOrderData
                                data: cancelledOrder,
                            },
                        ],
                    },
                    options: {
                        plugins: {
                            legend: {
                                labels: {
                                    usePointStyle: true,
                                },
                            },
                        },
                    },
                });
            } //End if

            /Sale statistics Chart/;
            if ($("#myChart2").length) {
                var karnataka = JSON.parse(`[{{karnatakaOrders}}]`);
                console.log(karnataka, "<=== KA");
                var kerala = JSON.parse(`[{{keralaOrders}}]`);
                console.log(kerala, "<== KL");
                var Tamilnadu = JSON.parse(`[{{tamilnaduOrders}}]`);
                console.log(Tamilnadu, "<=== TN");
                var ctx = document.getElementById("myChart2");
                var myChart = new Chart(ctx, {
                    type: "bar",
                    data: {
                        labels: [
                            "Jan",
                            "Feb",
                            "Mar",
                            "Apr",
                            "May",
                            "Jun",
                            "Jul",
                            "Aug",
                            "Sep",
                            "Oct",
                            "Nov",
                            "Dec",
                        ],
                        datasets: [
                            {
                                label: "KL",
                                backgroundColor: "#5897fb",
                                barThickness: 10,
                                data: kerala,
                            },
                            {
                                label: "KN",
                                backgroundColor: "#7bcf86",
                                barThickness: 10,
                                data: karnataka,
                            },
                            {
                                label: "TM",
                                backgroundColor: "#ff9076",
                                barThickness: 10,
                                data: Tamilnadu,
                            },
                            {
                                label: "Others",
                                backgroundColor: "#d595e5",
                                barThickness: 10,
                                data: [0, 0, 0, 0],
                            },
                        ],
                    },
                    options: {
                        plugins: {
                            legend: {
                                labels: {
                                    usePointStyle: true,
                                },
                            },
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                            },
                        },
                    },
                });
            } //end if

            if ($("#myChart3").length) {
                let categoryWise = JSON.parse(`[{{catVal}}]`)
                let str = `[{{catKey}}]`;
                let stringWithoutBrackets = str.slice(1, -1);
                let splitArray = stringWithoutBrackets.split(',');
                let formattedArray = splitArray.map(item => item.trim().replace(/'/g, '"'));
                console.log(formattedArray)
                var ctx = document.getElementById("myChart3");
                var myChart = new Chart(ctx, {
                    type: "doughnut",
                    data: {
                        labels: formattedArray,
                        datasets: [
                            {
                                data: categoryWise,
                                backgroundColor: ["#FF6384", "#36A2EB", "#FFCE56", "#00FFFF"],
                                hoverBackgroundColor: ["#FF6384", "#36A2EB", "#FFCE56", "#00FFFF"],
                            },
                        ],
                    },
                });
            }
        })(jQuery);

</script>
</body>
